import{a as ve,b as xe,e as Se,f as Ee}from"./chunk-2T43LGJZ.js";import{a as T,b as E}from"./chunk-PBZD4OP7.js";import{Aa as t,Ac as ee,Ad as he,Ba as e,Ca as s,Cc as te,Ga as y,Ha as x,Hc as ie,Ia as M,Ic as ne,Mb as L,O as b,Oa as S,Oc as oe,P as g,Pa as o,Qa as c,Qc as ae,W as h,X as v,Xa as N,Zc as re,_ as P,a as w,b as I,cc as W,db as V,dc as D,eb as $,ec as O,fc as H,fd as le,ga as r,gc as j,gd as de,hc as A,ic as G,lc as q,mc as z,pa as F,qd as ce,rd as se,sc as Y,sd as me,tc as J,td as pe,ua as u,uc as K,ud as ue,vc as Q,vd as be,wd as fe,xa as R,xc as X,xd as _e,ya as f,yb as B,yc as Z,za as _,zb as U}from"./chunk-QVEDGAMG.js";var Ne=(a,i)=>i.edificioid,ke=(a,i)=>i.especialidadid,Fe=(a,i)=>i.medicoid,Me=(a,i)=>i.estadoid,De=(a,i)=>i.consultaid,Te=(a,i)=>i.citaid;function we(a,i){if(a&1&&(t(0,"nb-option",18),o(1),e()),a&2){let n=i.$implicit;u("value",n.edificioid),r(),c(n.nombre)}}function Ie(a,i){if(a&1&&(t(0,"nb-option",18),o(1),e()),a&2){let n=i.$implicit;u("value",n.especialidadid),r(),c(n.nombre)}}function Pe(a,i){if(a&1&&(t(0,"nb-option",18),o(1),e()),a&2){let n=i.$implicit;u("value",n.medicoid),r(),c(n.nombre_completo)}}function Re(a,i){if(a&1&&(t(0,"nb-option",18),o(1),e()),a&2){let n=i.$implicit;u("value",n.estadoid),r(),c(n.nombre)}}function Ve(a,i){if(a&1&&(t(0,"th"),o(1),V(2,"uppercase"),e()),a&2){let n=i.$implicit;r(),c($(2,1,n))}}function $e(a,i){if(a&1){let n=y();t(0,"tr",32)(1,"td"),o(2),e(),t(3,"td"),o(4),e(),t(5,"td"),o(6),e(),t(7,"td"),o(8),e(),t(9,"td"),o(10),e(),t(11,"td",36),s(12,"nb-badge",37),e(),t(13,"td")(14,"div",38)(15,"button",39),x("click",function(){let d=h(n).$implicit,l=M();return v(l.downloadPDF(d.consultaid))}),s(16,"nb-icon",40),e()()()()}if(a&2){let n=i.$implicit;r(2),c(n.fecha),r(2),c(n.edificio),r(2),c(n.especialidad),r(2),c(n.medico),r(2),c(n.paciente),r(2),u("text",n.estado)("status",n.estado_abreviatura==="PN"?"basic":n.estado_abreviatura==="CC"?"primary":n.estado_abreviatura==="DEL"?"danger":n.estado_abreviatura==="FIN"?"success":"")}}function Be(a,i){a&1&&(t(0,"tr",33)(1,"td",41),o(2,"No hay resultados."),e()())}function Ue(a,i){if(a&1){let n=y();t(0,"tr")(1,"th"),o(2,"Fecha:"),e(),t(3,"td"),o(4),e()(),t(5,"tr")(6,"th"),o(7,"Edificio:"),e(),t(8,"td"),o(9),e()(),t(10,"tr")(11,"th"),o(12,"Especialidad:"),e(),t(13,"td"),o(14),e()(),t(15,"tr")(16,"th"),o(17,"M\xE9dico:"),e(),t(18,"td"),o(19),e()(),t(20,"tr")(21,"th"),o(22,"Paciente:"),e(),t(23,"td"),o(24),e()(),t(25,"tr")(26,"th"),o(27,"Estado:"),e(),t(28,"td",36),s(29,"nb-badge",42),e()(),t(30,"tr",43)(31,"th"),o(32,"Acciones:"),e(),t(33,"td")(34,"button",44),x("click",function(){let d=h(n).$implicit,l=M();return v(l.downloadPDF(d.consultaid))}),o(35," Descargar Resultados "),s(36,"nb-icon",40),e()()()}if(a&2){let n=i.$implicit;r(4),c(n.fecha),r(5),c(n.edificio),r(5),c(n.especialidad),r(5),c(n.medico),r(5),c(n.paciente),r(5),u("text",n.estado)("status",n.estado_abreviatura==="PN"?"basic":n.estado_abreviatura==="CC"?"primary":n.estado_abreviatura==="DEL"?"danger":n.estado_abreviatura==="FIN"?"success":"")}}var Ce=(()=>{let i=class i{get f(){return this.form.controls}constructor(){this._fb=b(q),this._resultService=b(Se),this._datePipe=b(U),this._destroyRef=b(P),this._consultationService=b(xe),this._setupService=b(Ee),this._appointmentService=b(ve),this.tableHeadings=F(["Fecha","Edificio","Especialidad","M\xE9dico","Paciente","Estado","Acciones"]),this.results=F([]),this.buildings=E(this._setupService.getBuildings()),this.specialities=E(this._setupService.getTypesSpecialities()),this.doctors=E(this._setupService.getDoctors()),this.statuses=E(this._appointmentService.getStatuses()),this.form=this._fb.group({fecha_desde:["",[D.required]],fecha_hasta:["",[D.required]],edificioid:[""],especialidadid:[""],medicoid:[""],paciente:[""],estadoid:[""]}),this.f.fecha_desde.setValue(new Date(new Date().getFullYear(),new Date().getMonth(),1)),this.f.fecha_hasta.setValue(new Date),this.subscribeForms(),this.getResults()}subscribeForms(){}getResults(){let p=I(w({},this.form.value),{fecha_desde:this._datePipe.transform(this.form.value.fecha_desde,"yyyy-MM-dd"),fecha_hasta:this._datePipe.transform(this.form.value.fecha_hasta,"yyyy-MM-dd")});this._resultService.getResults(p).pipe(T(this._destroyRef)).subscribe(d=>this.results.set(d))}downloadPDF(p){this._consultationService.generatePDF(p).pipe(T(this._destroyRef)).subscribe(d=>{let l=window.URL.createObjectURL(d),m=document.createElement("a");m.href=l,m.download=`Historia_Clinica_${p}.pdf`,document.body.appendChild(m),m.click(),m.remove(),window.URL.revokeObjectURL(l)})}};i.\u0275fac=function(d){return new(d||i)},i.\u0275cmp=g({type:i,selectors:[["ng-component"]],standalone:!0,features:[N],decls:84,vars:4,consts:[["dateFromInput",""],["dateFromPicker",""],["dateToInput",""],["dateToPicker",""],[1,"border-0"],[1,"border-0","px-2","px-md-4"],[1,"fs-4"],[1,"px-2","px-md-4"],[1,"row","g-3","mb-4",3,"formGroup"],[1,"col-md-6","col-xxl-3"],[1,"label","fs-7","mb-1"],[1,"d-flex","position-relative"],["nbInput","","placeholder","Fecha inicio","formControlName","fecha_desde","fullWidth","",3,"nbDatepicker"],["nbButton","","ghost","",1,"position-absolute","end-0",3,"click"],["icon","calendar-outline"],["nbInput","","placeholder","Fecha fin","formControlName","fecha_hasta","fullWidth","",3,"nbDatepicker"],["placeholder","Seleccione un m\xE9dico","formControlName","edificioid","fullWidth",""],["value",""],[3,"value"],["placeholder","Seleccione un m\xE9dico","formControlName","especialidadid","fullWidth",""],["placeholder","Seleccione un m\xE9dico","formControlName","medicoid","fullWidth",""],["nbPrefix","","icon","search-outline"],["nbInput","","type","search","placeholder","Buscar paciente por nombre o dni","formControlName","paciente","fullWidth",""],["placeholder","Seleccione un estado","formControlName","estadoid","fullWidth",""],[1,"col-md-6","col-xxl-3","mt-md-auto"],[1,"d-flex","gap-2"],["nbButton","","status","primary","fullWidth","",3,"click"],["icon","options-2-outline"],[1,"table-responsive","d-none","d-lg-block"],[1,"table","table-borderless"],[1,"border-bottom","border-top"],[1,"text-center"],[1,"align-middle","text-center"],[1,"text-center","align-middle"],[1,"table-responsive","d-block","d-lg-none"],[1,"table","table-sm","table-bordered"],[1,"position-relative"],["position","top left",1,"center-badge",3,"text","status"],[1,"d-flex","gap-2","justify-content-center"],["nbButton","","size","small","status","basic",3,"click"],["icon","download-outline"],["colspan","8"],["position","center left",1,"ms-1",3,"text","status"],[1,"align-middle","last-row"],["nbButton","","size","tiny","status","basic",3,"click"]],template:function(d,l){if(d&1){let m=y();t(0,"nb-card",4)(1,"nb-card-header",5)(2,"span",6),o(3," Lista de historias cl\xEDnicas "),e()(),t(4,"nb-card-body",7)(5,"form",8)(6,"div",9)(7,"label",10),o(8,"Desde: "),e(),t(9,"div",11),s(10,"input",12,0),t(12,"button",13),x("click",function(){h(m);let k=S(11);return v(k.click())}),s(13,"nb-icon",14),e(),s(14,"nb-datepicker",null,1),e()(),t(16,"div",9)(17,"label",10),o(18,"Hasta: "),e(),t(19,"div",11),s(20,"input",15,2),t(22,"button",13),x("click",function(){h(m);let k=S(21);return v(k.click())}),s(23,"nb-icon",14),e(),s(24,"nb-datepicker",null,3),e()(),t(26,"div",9)(27,"label",10),o(28,"Edificio: "),e(),t(29,"nb-select",16)(30,"nb-option",17),o(31,"Todos"),e(),f(32,we,2,2,"nb-option",18,Ne),e()(),t(34,"div",9)(35,"label",10),o(36,"Especialidad: "),e(),t(37,"nb-select",19)(38,"nb-option",17),o(39,"Todos"),e(),f(40,Ie,2,2,"nb-option",18,ke),e()(),t(42,"div",9)(43,"label",10),o(44,"M\xE9dico: "),e(),t(45,"nb-select",20)(46,"nb-option",17),o(47,"Todos"),e(),f(48,Pe,2,2,"nb-option",18,Fe),e()(),t(50,"div",9)(51,"label",10),o(52,"Paciente: "),e(),t(53,"nb-form-field"),s(54,"nb-icon",21)(55,"input",22),e()(),t(56,"div",9)(57,"label",10),o(58,"Estado: "),e(),t(59,"nb-select",23)(60,"nb-option",17),o(61,"Todos"),e(),f(62,Re,2,2,"nb-option",18,Me),e()(),t(64,"div",24)(65,"div",25)(66,"button",26),x("click",function(){return h(m),v(l.getResults())}),o(67," Filtrar "),s(68,"nb-icon",27),e()()()(),t(69,"div",28)(70,"table",29)(71,"thead",30)(72,"tr",31),f(73,Ve,3,3,"th",null,R),e()(),t(75,"tbody"),f(76,$e,17,7,"tr",32,De,!1,Be,3,0,"tr",33),e()()(),t(79,"div",34)(80,"table",35)(81,"tbody"),f(82,Ue,37,7,null,null,Te),e()()()()()}if(d&2){let m=S(15),C=S(25);r(5),u("formGroup",l.form),r(5),u("nbDatepicker",m),r(10),u("nbDatepicker",C),r(12),_(l.buildings()),r(8),_(l.specialities()),r(8),_(l.doctors()),r(14),_(l.statuses()),r(11),_(l.tableHeadings()),r(3),_(l.results()),r(6),_(l.results())}},dependencies:[B,z,j,W,O,H,A,G,Z,X,Q,K,te,ee,J,Y,re,de,le,he,ie,ne,ce,pe,se,ue,me,_e,fe,be,ae,oe],encapsulation:2});let a=i;return a})();var ge=(()=>{let i=class i{};i.\u0275fac=function(d){return new(d||i)},i.\u0275cmp=g({type:i,selectors:[["app-results"]],standalone:!0,features:[N],decls:1,vars:0,template:function(d,l){d&1&&s(0,"router-outlet")},dependencies:[L],encapsulation:2});let a=i;return a})();var et=[{path:"",component:ge,children:[{path:"",component:Ce}]}];export{et as RESULTS_ROUTES};
