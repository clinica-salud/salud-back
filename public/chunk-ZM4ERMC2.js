import{a as Ce,c as et,d as tt}from"./chunk-BGLUF2CD.js";import{a as Ke}from"./chunk-OI7GQYL7.js";import{a as Qe,b as B,c as re,d as xe}from"./chunk-2T43LGJZ.js";import{a as T,b as G}from"./chunk-PBZD4OP7.js";import{$ as Ee,Aa as t,Ac as R,Ad as Ze,Ba as e,Ca as s,Cc as V,Ga as E,Ha as u,Hc as Be,Ia as _,Ic as Ae,Ja as De,Ka as Me,Lb as Re,Mb as Ve,O as p,Oa as se,Oc as Pe,P as S,Pa as i,Qa as c,Qc as $e,Ra as j,Sa as z,V as ve,Vc as ze,W as C,Wc as Ge,X as x,Xa as v,Xc as qe,Zc as Ue,_ as I,a as L,aa as A,b as ce,bd as Le,ca as Te,cc as J,cd as We,db as Fe,dc as y,eb as ke,ec as X,fa as U,fc as Y,fd as ie,ga as d,gc as Z,gd as ne,hc as K,ic as Q,kd as fe,lc as ee,ld as oe,mb as H,mc as te,nb as Ie,pa as P,pd as je,q as Se,qa as W,qd as He,ra as ye,rd as be,sa as Ne,sc as O,sd as he,tc as F,td as _e,ua as f,uc as w,ud as ae,vc as N,vd as Je,wa as pe,wc as ue,wd as Xe,xa as $,xc as D,xd as Ye,ya as b,yb as Oe,yc as M,za as h,zb as we}from"./chunk-QVEDGAMG.js";var it=(()=>{let a=class a{};a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=S({type:a,selectors:[["app-medical-consultations"]],standalone:!0,features:[v],decls:1,vars:0,template:function(l,r){l&1&&s(0,"router-outlet")},dependencies:[Ve],encapsulation:2});let o=a;return o})();var ot=(()=>{let a=class a{constructor(){this._fb=p(ee),this._dialogRef=p(fe),this._recipeService=p(xe),this._destroyRef=p(I),this.citaid=A.required(),this.form=this._fb.group({medicamento:["",[y.required]],via_administrativa:["",[y.required]],dosis:["",[y.required]],frecuencia:["",[y.required]],tiempo:["",[y.required]],cantidad:["",[y.required]],indicaciones:["",[y.required]]})}addRecipe(){let m=ce(L({},this.form.value),{citaid:this.citaid});this._recipeService.addRecipe(m).pipe(T(this._destroyRef)).subscribe(()=>this._dialogRef.close({cancel:!1}))}close(){this._dialogRef.close({cancel:!0})}};a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=S({type:a,selectors:[["app-add-recipe-modal"]],inputs:{citaid:[1,"citaid"]},standalone:!0,features:[v],decls:39,vars:2,consts:[["appWindow","","widthSize","sm"],[1,"d-flex","align-items-center","justify-content-between"],[1,"fs-5"],["nbButton","","size","small",3,"click"],["icon","close-outline"],[1,"row","g-3",3,"formGroup"],[1,"col-md-12"],[1,"required","fw-semibold","mb-2"],["nbInput","","type","text","placeholder","Medicamento...","formControlName","medicamento","fullWidth",""],["nbInput","","type","text","placeholder","Via de administraci\xF3n...","formControlName","via_administrativa","fullWidth",""],[1,"col-md-6"],["nbInput","","type","text","placeholder","Dosis...","formControlName","dosis","fullWidth",""],["nbInput","","type","text","placeholder","Frecuencia...","formControlName","frecuencia","fullWidth",""],["nbInput","","type","text","placeholder","Tiempo...","formControlName","tiempo","fullWidth",""],["nbInput","","type","text","placeholder","Cantidad...","formControlName","cantidad","fullWidth",""],["nbInput","","placeholder","Descripci\xF3n...","formControlName","indicaciones","rows","3","fullWidth",""],["nbButton","","status","primary","fullWidth","",1,"d-block","ms-auto",3,"click","disabled"]],template:function(l,r){l&1&&(t(0,"nb-card",0)(1,"nb-card-header",1)(2,"span",2),i(3,"Agregar Receta"),e(),t(4,"button",3),u("click",function(){return r.close()}),s(5,"nb-icon",4),e()(),t(6,"nb-card-body")(7,"form",5)(8,"div",6)(9,"label",7),i(10,"Medicamento"),e(),s(11,"input",8),e(),t(12,"div",6)(13,"label",7),i(14,"Via de administraci\xF3n"),e(),s(15,"input",9),e(),t(16,"div",10)(17,"label",7),i(18,"Dosis"),e(),s(19,"input",11),e(),t(20,"div",10)(21,"label",7),i(22,"Frecuencia"),e(),s(23,"input",12),e(),t(24,"div",10)(25,"label",7),i(26,"Tiempo"),e(),s(27,"input",13),e(),t(28,"div",10)(29,"label",7),i(30,"Cantidad"),e(),s(31,"input",14),e(),t(32,"div",6)(33,"label",7),i(34,"Indicaciones"),e(),s(35,"textarea",15),e()()(),t(36,"nb-card-footer")(37,"button",16),u("click",function(){return r.addRecipe()}),i(38," Agregar "),e()()()),l&2&&(d(7),f("formGroup",r.form),d(30),f("disabled",!r.form.valid))},dependencies:[te,Z,J,X,Y,K,Q,V,R,M,D,N,ue,w,F,O,ne,ie,_e,ae,Ce],encapsulation:2});let o=a;return o})();var pt=["*"];var de=(()=>{let a=class a{};a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=S({type:a,selectors:[["app-detail-tab"]],standalone:!0,features:[v],ngContentSelectors:pt,decls:3,vars:0,consts:[[1,"border-0","m-0"],[1,"px-0","px-md-4","py-3","py-md-4"]],template:function(l,r){l&1&&(De(),t(0,"nb-card",0)(1,"nb-card-body",1),Me(2),e()())},dependencies:[M,D,N],encapsulation:2});let o=a;return o})();function ut(o,a){if(o&1&&(t(0,"tr",10)(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e(),t(7,"td"),i(8),e()()),o&2){let n=a.$implicit;d(2),c(n.observacion),d(2),c(n.tipo_tratamiento),d(2),z("",n.pieza_numero,"",n.pieza_vila,""),d(2),c(n.tipo_cara)}}function ft(o,a){o&1&&(t(0,"tr",10)(1,"td",17),i(2,"No hay tratamientos"),e()())}function bt(o,a){if(o&1){let n=E();t(0,"tr",16)(1,"td",15),i(2),e(),t(3,"td",15),i(4),e(),t(5,"td"),i(6),e(),t(7,"td"),i(8),e(),t(9,"td"),i(10),e(),t(11,"td"),i(12),e(),t(13,"td"),i(14),e(),t(15,"td")(16,"button",18),u("click",function(){let l=C(n).$implicit,r=_();return x(r.deleteRecipe(l.recetaid))}),s(17,"nb-icon",19),e()()()}if(o&2){let n=a.$implicit;d(2),j(" ",n.medicamento," "),d(2),j(" ",n.indicaciones," "),d(2),c(n.via_administracion),d(2),c(n.dosis),d(2),c(n.frecuencia),d(2),c(n.tiempo),d(2),c(n.cantidad)}}function ht(o,a){o&1&&(t(0,"tr",10)(1,"td",20),i(2,"No hay recetas."),e()())}function _t(o,a){if(o&1&&(t(0,"tr",16)(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e(),t(7,"td"),i(8),e()()),o&2){let n=a.$implicit;d(2),c(n.observacion),d(2),c(n.tipo_tratamiento),d(2),z("",n.pieza_numero,"",n.pieza_vila,""),d(2),c(n.tipo_cara)}}function Ct(o,a){o&1&&(t(0,"tr",10)(1,"td",17),i(2,"No hay tratamientos"),e()())}var at=(()=>{let a=class a{constructor(){this._dialogService=p(oe),this._recipeService=p(xe),this._destroyRef=p(I),this._consultationService=p(B),this.treatments=A.required(),this.diagnosis=A.required(),this.consulta=A.required(),this.recipes=P([])}ngOnChanges(m){m.consulta&&this.consulta().citaid&&this.getRecipes()}getRecipes(){this._recipeService.getRecipes(this.consulta().citaid).pipe(T(this._destroyRef)).subscribe(m=>this.recipes.set(m))}downloadPDF(){this._consultationService.generatePDF(this.consulta().consultaid).pipe(T(this._destroyRef)).subscribe(m=>{let l=window.URL.createObjectURL(m),r=document.createElement("a");r.href=l,r.download=`Historia_Clinica_${this.consulta().consultaid}.pdf`,document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(l)})}addRecipe(){this._dialogService.open(ot,{context:{citaid:this.consulta().citaid}}).onClose.subscribe(({cancel:l})=>{l||this.getRecipes()})}deleteRecipe(m){confirm("\xBFDeseas borrar esta receta?")&&this._recipeService.deleteRecipe(m).pipe(T(this._destroyRef)).subscribe(()=>this.getRecipes())}};a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=S({type:a,selectors:[["app-diagnosis-treatment"]],inputs:{treatments:[1,"treatments"],diagnosis:[1,"diagnosis"],consulta:[1,"consulta"]},standalone:!0,features:[ve,v],decls:79,vars:3,consts:[[1,"border-0"],[1,"d-flex","align-items-center","justify-content-between"],["nbButton","","status","info","size","small",3,"click"],["icon","eye-outline"],[1,"container-fluid"],[1,"d-flex","align-items-center","justify-content-between","my-3"],[1,"fs-5"],[1,"table-responsive"],[1,"table","table-sm","table-bordered"],[1,"text-center"],[1,"text-center","align-middle"],[1,"my-5"],[1,"d-flex","gap-2"],["nbButton","","status","success","size","small",3,"click"],["icon","plus-outline"],[1,"text-start"],[1,"align-middle","text-center"],["colspan","4"],["nbButton","","status","danger","size","small",3,"click"],["icon","trash-outline"],["colspan","8"]],template:function(l,r){l&1&&(t(0,"app-detail-tab")(1,"nb-card",0)(2,"nb-card-header",1)(3,"button",2),u("click",function(){return r.downloadPDF()}),s(4,"nb-icon",3),i(5," Descargar diagnostico "),e()(),t(6,"nb-card-body")(7,"div",4)(8,"div",5)(9,"p",6),i(10,"Tratamiento"),e()(),t(11,"div",7)(12,"table",8)(13,"thead")(14,"tr",9)(15,"th"),i(16,"Diagn\xF3stico"),e(),t(17,"th"),i(18,"Tratamiento"),e(),t(19,"th"),i(20,"Pieza Dental"),e(),t(21,"th"),i(22,"Cara"),e()()(),t(23,"tbody"),b(24,ut,9,5,"tr",10,$,!1,ft,3,0,"tr",10),e()()(),s(27,"hr",11),t(28,"div",5)(29,"p",6),i(30,"Receta"),e(),t(31,"div",12)(32,"button",13),u("click",function(){return r.addRecipe()}),s(33,"nb-icon",14),e()()(),t(34,"div",7)(35,"table",8)(36,"thead")(37,"tr",9)(38,"th",15),i(39,"Medicamento"),e(),t(40,"th",15),i(41,"Indicaciones"),e(),t(42,"th"),i(43,"Via de administraci\xF3n"),e(),t(44,"th"),i(45,"Dosis"),e(),t(46,"th"),i(47,"Frecuencia"),e(),t(48,"th"),i(49,"Tiempo"),e(),t(50,"th"),i(51,"Cantidad"),e(),t(52,"th"),i(53,"Acci\xF3n"),e()()(),t(54,"tbody"),b(55,bt,18,7,"tr",16,$,!1,ht,3,0,"tr",10),e()()(),s(58,"hr",11),t(59,"div",5)(60,"p",6),i(61,"Diagn\xF3stico"),e()(),t(62,"div",7)(63,"table",8)(64,"thead")(65,"tr",9)(66,"th"),i(67,"Diagn\xF3stico"),e(),t(68,"th"),i(69,"Tratamiento"),e(),t(70,"th"),i(71,"Pieza Dental"),e(),t(72,"th"),i(73,"Cara"),e()()(),t(74,"tbody"),b(75,_t,9,5,"tr",16,$,!1,Ct,3,0,"tr",10),e()()(),s(78,"hr",11),e()()()()),l&2&&(d(24),h(r.treatments()),d(31),h(r.recipes()),d(20),h(r.diagnosis()))},dependencies:[de,M,D,N,w,F,O,V,R],encapsulation:2});let o=a;return o})();var xt=(o,a)=>a.piezaid,gt=(o,a)=>a.tipotratamientoid,St=(o,a)=>a.tipocaraid;function vt(o,a){if(o&1&&(t(0,"nb-option",10),i(1),e()),o&2){let n=a.$implicit;f("value",n.piezaid),d(),z("",n.numero,"",n.fila,"")}}function Et(o,a){if(o&1&&(t(0,"nb-option",10),i(1),e()),o&2){let n=a.$implicit;f("value",n.tipotratamientoid),d(),c(n.nombre)}}function Tt(o,a){if(o&1&&(t(0,"nb-option",10),i(1),e()),o&2){let n=a.$implicit;f("value",n.tipocaraid),d(),c(n.nombre)}}var rt=(()=>{let a=class a{constructor(){this._fb=p(ee),this._dialogRef=p(fe),this._odontogramService=p(re),this._consultationService=p(B),this.teeth=G(this._odontogramService.getMinimalTeethPieces()),this.treatments=G(this._odontogramService.getTreatments()),this.faces=G(this._odontogramService.getFaces()),this.form=this._fb.group({piezaid:["",[y.required]],tipotratamientoid:["",[y.required]],tipocaraid:[""],observacion:[""],es_tratamiento:[!0]})}ngOnInit(){this.selectedTooth&&this.form.patchValue({piezaid:this.selectedTooth.piezaid})}addTreatment(){let m=L({},this.form.value);this._consultationService.addOdontogramConsultation(this.consultaid,m).subscribe(()=>this._dialogRef.close({cancel:!1}))}close(){this._dialogRef.close({cancel:!0})}};a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=S({type:a,selectors:[["app-add-treatment-modal"]],inputs:{consultaid:"consultaid",selectedTooth:"selectedTooth"},standalone:!0,features:[v],decls:35,vars:4,consts:[["appWindow","","widthSize","tn"],[1,"d-flex","align-items-center","justify-content-between"],[1,"fs-5"],["nbButton","","size","small",3,"click"],["icon","close-outline"],[1,"row","g-3",3,"formGroup"],[1,"col-md-12"],[1,"required","fw-semibold","mb-2"],["placeholder","Selecciona Pieza","formControlName","piezaid","fullWidth",""],["value","all"],[3,"value"],["placeholder","Selecciona Tratamiento","formControlName","tipotratamientoid","fullWidth",""],["placeholder","Selecciona Cara","formControlName","tipocaraid","fullWidth",""],["nbInput","","placeholder","Observaci\xF3n...","formControlName","observacion","fullWidth",""],["nbButton","","status","primary","fullWidth","",1,"d-block","ms-auto",3,"click","disabled"]],template:function(l,r){l&1&&(t(0,"nb-card",0)(1,"nb-card-header",1)(2,"span",2),i(3),e(),t(4,"button",3),u("click",function(){return r.close()}),s(5,"nb-icon",4),e()(),t(6,"nb-card-body")(7,"form",5)(8,"div",6)(9,"label",7),i(10,"Selecciona Pieza"),e(),t(11,"nb-select",8)(12,"nb-option",9),i(13,"Todos"),e(),b(14,vt,2,3,"nb-option",10,xt),e()(),t(16,"div",6)(17,"label",7),i(18,"Selecciona Tratamiento"),e(),t(19,"nb-select",11),b(20,Et,2,2,"nb-option",10,gt),e()(),t(22,"div",6)(23,"label",7),i(24,"Selecciona Cara"),e(),t(25,"nb-select",12),b(26,Tt,2,2,"nb-option",10,St),e()(),t(28,"div",6)(29,"label",7),i(30,"Observacion"),e(),s(31,"textarea",13),e()()(),t(32,"nb-card-footer")(33,"button",14),u("click",function(){return r.addTreatment()}),i(34," Agregar "),e()()()),l&2&&(d(3),z(" Agregar Tratamiento | ",r.selectedTooth==null?null:r.selectedTooth.numero,"",r.selectedTooth==null?null:r.selectedTooth.fila," "),d(4),f("formGroup",r.form),d(7),h(r.teeth()),d(6),h(r.treatments()),d(6),h(r.faces()),d(7),f("disabled",r.form.invalid))},dependencies:[te,Z,J,X,Y,K,Q,V,R,M,D,N,ue,w,F,O,ne,ie,_e,be,ae,he,Ce],styles:[".cdk-global-scrollblock{position:static!important}"]});let o=a;return o})();var me=(o,a)=>a.piezaid;function yt(o,a){if(o&1){let n=E();t(0,"td")(1,"img",8),u("click",function(){let l=C(n).$implicit,r=_();return x(r.selected(l))}),e()()}if(o&2){let n=a.$implicit;d(),f("src","images/"+(n.abreviatura==="AD"?"adult":n.abreviatura==="INF"?"child":"")+"/"+n.imagen,U)}}function Nt(o,a){if(o&1){let n=E();t(0,"td")(1,"img",8),u("click",function(){C(n);let l=_().$implicit,r=_();return x(r.selected(l))}),e()()}if(o&2){let n=_().$implicit;d(),f("src","images/"+(n.abreviatura==="AD"?"adult":n.abreviatura==="INF"?"child":"")+"/"+n.imagen,U)}}function Dt(o,a){o&1&&s(0,"td")}function Mt(o,a){if(o&1&&W(0,Nt,2,1,"td")(1,Dt,1,0,"td"),o&2){let n=a.$implicit;pe(n.imagen?0:1)}}function Ft(o,a){if(o&1){let n=E();t(0,"td")(1,"img",8),u("click",function(){let l=C(n).$implicit,r=_();return x(r.selected(l))}),e()()}if(o&2){let n=a.$implicit;d(),f("src","images/"+(n.abreviatura==="AD"?"adult":n.abreviatura==="INF"?"child":"")+"/"+n.imagen,U)}}function kt(o,a){o&1&&(t(0,"tr")(1,"td"),i(2,"18"),e(),t(3,"td"),i(4,"17"),e(),t(5,"td"),i(6,"16"),e(),t(7,"td"),i(8,"15"),e(),t(9,"td"),i(10,"14"),e(),t(11,"td"),i(12,"13"),e(),t(13,"td"),i(14,"12"),e(),t(15,"td"),i(16,"11"),e(),t(17,"td"),i(18,"21"),e(),t(19,"td"),i(20,"22"),e(),t(21,"td"),i(22,"23"),e(),t(23,"td"),i(24,"24"),e(),t(25,"td"),i(26,"25"),e(),t(27,"td"),i(28,"26"),e(),t(29,"td"),i(30,"27"),e(),t(31,"td"),i(32,"28"),e()(),t(33,"tr")(34,"td"),i(35,"48"),e(),t(36,"td"),i(37,"47"),e(),t(38,"td"),i(39,"46"),e(),t(40,"td"),i(41,"45"),e(),t(42,"td"),i(43,"44"),e(),t(44,"td"),i(45,"43"),e(),t(46,"td"),i(47,"42"),e(),t(48,"td"),i(49,"41"),e(),t(50,"td"),i(51,"31"),e(),t(52,"td"),i(53,"32"),e(),t(54,"td"),i(55,"33"),e(),t(56,"td"),i(57,"34"),e(),t(58,"td"),i(59,"35"),e(),t(60,"td"),i(61,"36"),e(),t(62,"td"),i(63,"37"),e(),t(64,"td"),i(65,"38"),e()())}function It(o,a){o&1&&(t(0,"tr")(1,"td"),i(2,"55"),e(),t(3,"td"),i(4,"54"),e(),t(5,"td"),i(6,"53"),e(),t(7,"td"),i(8,"52"),e(),t(9,"td"),i(10,"51"),e(),t(11,"td"),i(12,"61"),e(),t(13,"td"),i(14,"62"),e(),t(15,"td"),i(16,"63"),e(),t(17,"td"),i(18,"64"),e(),t(19,"td"),i(20,"65"),e()(),t(21,"tr")(22,"td"),i(23,"85"),e(),t(24,"td"),i(25,"84"),e(),t(26,"td"),i(27,"83"),e(),t(28,"td"),i(29,"82"),e(),t(30,"td"),i(31,"81"),e(),t(32,"td"),i(33,"71"),e(),t(34,"td"),i(35,"72"),e(),t(36,"td"),i(37,"73"),e(),t(38,"td"),i(39,"74"),e(),t(40,"td"),i(41,"75"),e()())}function Ot(o,a){if(o&1){let n=E();t(0,"td")(1,"img",8),u("click",function(){let l=C(n).$implicit,r=_();return x(r.selected(l))}),e()()}if(o&2){let n=a.$implicit;d(),f("src","images/"+(n.abreviatura==="AD"?"adult":n.abreviatura==="INF"?"child":"")+"/"+n.imagen,U)}}function wt(o,a){if(o&1){let n=E();t(0,"td")(1,"img",8),u("click",function(){C(n);let l=_().$implicit,r=_();return x(r.selected(l))}),e()()}if(o&2){let n=_().$implicit;d(),f("src","images/"+(n.abreviatura==="AD"?"adult":n.abreviatura==="INF"?"child":"")+"/"+n.imagen,U)}}function Rt(o,a){o&1&&s(0,"td")}function Vt(o,a){if(o&1&&W(0,wt,2,1,"td")(1,Rt,1,0,"td"),o&2){let n=a.$implicit;pe(n.imagen?0:1)}}function Bt(o,a){if(o&1){let n=E();t(0,"td")(1,"img",8),u("click",function(){let l=C(n).$implicit,r=_();return x(r.selected(l))}),e()()}if(o&2){let n=a.$implicit;d(),f("src","images/"+(n.abreviatura==="AD"?"adult":n.abreviatura==="INF"?"child":"")+"/"+n.imagen,U)}}var lt=(()=>{let a=class a{constructor(){this._odontogramService=p(re),this.selectedTooth=new Te,this.topA=[],this.topB=[],this.topC=[],this.bottomA=[],this.bottomB=[],this.bottomC=[],this.teethType=H(()=>this._odontogramService.teethType()),this.teeth=H(()=>this._odontogramService.teeth()),Ie(()=>this.orderTeeth(this.teeth()))}orderTeeth(m){let l=m.filter(k=>k.fila==="A"),r=m.filter(k=>k.fila==="B"),g=m.filter(k=>k.fila==="C");this.topA=l.slice(0,l.length/2),this.topB=r.slice(0,r.length/2),this.topC=g.slice(0,g.length/2),this.bottomA=l.slice(l.length/2),this.bottomB=r.slice(r.length/2),this.bottomC=g.slice(g.length/2)}selected(m){this.selectedTooth.next(m)}};a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=S({type:a,selectors:[["app-odontogram-graph"]],outputs:{selectedTooth:"selectedTooth"},standalone:!0,features:[v],decls:23,vars:1,consts:[[1,"table-responsive"],[1,"table"],[1,"topC"],[1,"topB"],[1,"topA"],[1,"bottomA"],[1,"bottomB"],[1,"bottomC"],["alt","odontograma",1,"pointer",3,"click","src"]],template:function(l,r){l&1&&(t(0,"div",0)(1,"table",1)(2,"tbody")(3,"tr",2),b(4,yt,2,1,"td",null,me),e(),t(6,"tr",3),b(7,Mt,2,1,null,null,me),e(),t(9,"tr",4),b(10,Ft,2,1,"td",null,me),e(),W(12,kt,66,0)(13,It,42,0),t(14,"tr",5),b(15,Ot,2,1,"td",null,me),e(),t(17,"tr",6),b(18,Vt,2,1,null,null,me),e(),t(20,"tr",7),b(21,Bt,2,1,"td",null,me),e()()()()),l&2&&(d(4),h(r.topC),d(3),h(r.topB),d(3),h(r.topA),d(2),pe(r.teethType()===1?12:r.teethType()===2?13:-1),d(3),h(r.bottomA),d(3),h(r.bottomB),d(3),h(r.bottomC))},styles:[".table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(caption) > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:.5rem;border-bottom-width:1px}.table[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05);transition:all .2s ease-in-out}td[_ngcontent-%COMP%]{text-align:center;padding:0!important;border-right:none!important;border-left:none!important}"]});let o=a;return o})();var At=()=>[lt,R,O,Le];function Pt(o,a){if(o&1){let n=E();t(0,"tr",10)(1,"td")(2,"span"),i(3),e(),s(4,"br"),t(5,"small",13),i(6),e()(),t(7,"td"),i(8),e(),t(9,"td"),i(10),e(),t(11,"td"),i(12),e(),t(13,"td")(14,"nb-checkbox",14),u("checkedChange",function(l){let r=C(n).$implicit,g=_(2);return x(g.patchTreatment(l,r))}),e()(),t(15,"td")(16,"button",15),u("click",function(){let l=C(n).$implicit,r=_(2);return x(r.deleteOdontogramConsultation(l))}),s(17,"nb-icon",16),e()()()}if(o&2){let n=a.$implicit;d(3),c(n==null?null:n.detalle),d(3),j("Observaci\xF3n: ",n==null?null:n.observacion,""),d(2),c(n==null?null:n.tipo_tratamiento),d(2),z("Pieza ",n==null?null:n.pieza_numero,"",n==null?null:n.pieza_fila,""),d(2),c(n==null?null:n.tipo_cara),d(2),f("checked",n==null?null:n.es_tratamiento)}}function $t(o,a){o&1&&(t(0,"tr",10)(1,"td",17),i(2,"No hay tratamientos"),e()())}function zt(o,a){if(o&1){let n=E();t(0,"div",4)(1,"app-odontogram-graph",5),u("selectedTooth",function(l){C(n);let r=_();return x(r.addTreatment(l))}),e()(),t(2,"div",6)(3,"div",7)(4,"table",8)(5,"thead")(6,"tr",9)(7,"th"),i(8,"Diagn\xF3stico"),e(),t(9,"th"),i(10,"Pr\xE1ctica"),e(),t(11,"th"),i(12,"Pieza Dental"),e(),t(13,"th"),i(14,"Cara"),e(),t(15,"th"),i(16,"Tratamiento"),e(),t(17,"th"),i(18,"Acci\xF3n"),e()()(),t(19,"tbody"),b(20,Pt,18,7,"tr",10,$,!1,$t,3,0,"tr",10),e()()(),t(23,"button",11),u("click",function(){C(n);let l=_();return x(l.addTreatment())}),s(24,"nb-icon",12),i(25," Agregar "),e()()}if(o&2){let n=_();d(20),h(n.odontogramConsultations())}}function Gt(o,a){o&1&&(t(0,"p",9),i(1,"Cargando odontograma..."),e())}var dt=(()=>{let a=class a{constructor(){this._dialogService=p(oe),this._odontogramService=p(re),this._consultationService=p(B),this._destroyRef=p(I),this.consultaid=A.required(),this.odontogramConsultations=A.required(),this.refreshConsultations=Ee(),this.teethType=H(()=>this._odontogramService.teethType()),this.teeth=H(()=>this._odontogramService.teeth()),this._odontogramService.getTeethPieces()}onRefreshConsultations(){this.refreshConsultations.emit()}toggleTeethType(){this._odontogramService.setTeethType(this.teethType()===1?2:1)}patchTreatment(m,l){let{piezaid:r}=l;this._consultationService.patchOdontogramConsultation(this.consultaid(),r,{es_tratamiento:m}).pipe(T(this._destroyRef)).subscribe(()=>this.onRefreshConsultations())}deleteOdontogramConsultation(m){confirm("\xBFEsta seguro de eliminar este elemento?")&&this._consultationService.deleteOdontogramConsultation(this.consultaid(),m.piezaid).pipe(T(this._destroyRef)).subscribe(()=>this.onRefreshConsultations())}addTreatment(m){this._dialogService.open(rt,{context:{selectedTooth:m,consultaid:this.consultaid()}}).onClose.subscribe(({cancel:r})=>{r||this.onRefreshConsultations()})}};a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=S({type:a,selectors:[["app-odontogram"]],inputs:{consultaid:[1,"consultaid"],odontogramConsultations:[1,"odontogramConsultations"]},outputs:{refreshConsultations:"refreshConsultations"},standalone:!0,features:[v],decls:10,vars:2,consts:[["id","odontogram",1,"border-0"],[1,"border-0","px-2","px-md-4","d-flex","align-items-center","justify-content-between"],[1,"fs-4"],[1,"px-2","px-md-4"],[1,"wrapper"],[3,"selectedTooth"],[1,"container-fluid"],[1,"table-responsive","my-4","mt-5"],[1,"table","table-sm","table-bordered","table-hover"],[1,"text-center"],[1,"text-center","align-middle"],["nbButton","","status","primary",1,"d-block","ms-auto",3,"click"],["icon","plus-outline"],[1,"text-secondary"],["status","success",3,"checkedChange","checked"],["nbButton","","status","danger","size","small",3,"click"],["icon","trash-outline"],["colspan","6"]],template:function(l,r){l&1&&(t(0,"app-detail-tab")(1,"nb-card",0)(2,"nb-card-header",1)(3,"span",2),i(4),e()(),t(5,"nb-card-body",3),W(6,zt,26,1)(7,Gt,2,0),ye(8,6,At,null,7),e()()()),l&2&&(d(4),j(" Odontograma Dental de ",r.teethType()===1?"Adulto":r.teethType()===2?"Ni\xF1o":""," "),d(4),Ne(r.teeth().length!==0))},dependencies:[de,V,F,M,D,N,w,We],styles:[".wrapper[_ngcontent-%COMP%]{margin-inline:auto;max-width:1140px;width:100%}"]});let o=a;return o})();var mt=(()=>{let a=class a{constructor(){this._consultationService=p(B),this._activatedRoute=p(Re),this._destroyRef=p(I),this.consultaid=G(this._activatedRoute.params.pipe(Se(m=>m.consultaid))),this.odontogramConsultations=P([]),this.treatments=P([]),this.consulta=P({}),this.getOdontogramConsultation()}getOdontogramConsultation(){this._consultationService.getOdontogramConsultations(this.consultaid()).pipe(T(this._destroyRef)).subscribe(({piezas:m,consulta:l})=>{this.odontogramConsultations.set(m),this.treatments.set(m.filter(r=>r.es_tratamiento)),this.consulta.set(l)})}onRefreshConsultations(){this.getOdontogramConsultation()}};a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=S({type:a,selectors:[["ng-component"]],standalone:!0,features:[v],decls:9,vars:5,consts:[[1,"m-0","border-0"],[1,"p-2","p-md-0"],[1,"row","m-0"],[1,"col-md-12","p-0"],["tabTitle","Odontograma",1,"p-0"],[3,"refreshConsultations","consultaid","odontogramConsultations"],["tabTitle","Diagn\xF3stico y Tratamiento",1,"p-0"],[3,"treatments","diagnosis","consulta"]],template:function(l,r){l&1&&(t(0,"nb-card",0)(1,"nb-card-body",1)(2,"div",2)(3,"div",3)(4,"nb-tabset")(5,"nb-tab",4)(6,"app-odontogram",5),u("refreshConsultations",function(){return r.onRefreshConsultations()}),e()(),t(7,"nb-tab",6),s(8,"app-diagnosis-treatment",7),e()()()()()()),l&2&&(d(6),f("consultaid",r.consultaid())("odontogramConsultations",r.odontogramConsultations()),d(2),f("treatments",r.treatments())("diagnosis",r.odontogramConsultations())("consulta",r.consulta()))},dependencies:[M,D,N,qe,Ge,ze,F,dt,at],styles:["[_nghost-%COMP%]{--custom-color: #4fd1c5}[_nghost-%COMP%]     nb-tabset .tabset{flex-wrap:wrap}[_nghost-%COMP%]     nb-tabset a.tab-link:focus, [_nghost-%COMP%]     nb-tabset a.tab-link:hover{color:var(--custom-color)}[_nghost-%COMP%]     nb-tabset .tab:hover .tab-link{color:var(--custom-color)}[_nghost-%COMP%]     nb-tabset .tab:hover .tab-link:before{background-color:var(--custom-color)}[_nghost-%COMP%]     nb-tabset .tab.active .tab-link{color:var(--custom-color)}[_nghost-%COMP%]     nb-tabset .tab.active .tab-link:before{background-color:var(--custom-color)}"]});let o=a;return o})();var qt=(o,a)=>a.estadoid,st=(o,a)=>a.consultaid;function Ut(o,a){if(o&1&&(t(0,"nb-option",22),i(1),e()),o&2){let n=a.$implicit;f("value",n.estadoid),d(),c(n.nombre)}}function Lt(o,a){if(o&1&&(t(0,"th"),i(1),Fe(2,"uppercase"),e()),o&2){let n=a.$implicit;d(),c(ke(2,1,n))}}function Wt(o,a){if(o&1){let n=E();t(0,"tr",30)(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e(),t(7,"td"),i(8),e(),t(9,"td"),i(10),e(),t(11,"td"),i(12),e(),t(13,"td",34),s(14,"nb-badge",35),e(),t(15,"td")(16,"button",36),u("click",function(){let l=C(n).$implicit,r=_();return x(r.showEvent(l))}),s(17,"nb-icon",37),e()()()}if(o&2){let n=a.$implicit;d(2),c(n.fecha),d(2),c(n.hora),d(2),c(n.paciente),d(2),c(n.medico),d(2),c(n.especialidad),d(2),c(n.edificio),d(2),f("text",n.estado)("status",n.estado_abreviatura==="PN"?"basic":n.estado_abreviatura==="CC"?"primary":n.estado_abreviatura==="DEL"?"danger":n.estado_abreviatura==="FIN"?"success":"")}}function jt(o,a){o&1&&(t(0,"tr",31)(1,"td",38),i(2,"No hay consultas m\xE9dicas."),e()())}function Ht(o,a){if(o&1){let n=E();t(0,"tr")(1,"th"),i(2,"Fecha:"),e(),t(3,"td"),i(4),e()(),t(5,"tr")(6,"th"),i(7,"Hora:"),e(),t(8,"td"),i(9),e()(),t(10,"tr")(11,"th"),i(12,"Paciente:"),e(),t(13,"td"),i(14),e()(),t(15,"tr")(16,"th"),i(17,"Doctor:"),e(),t(18,"td"),i(19),e()(),t(20,"tr")(21,"th"),i(22,"Especialidad:"),e(),t(23,"td"),i(24),e()(),t(25,"tr")(26,"th"),i(27,"Edificio:"),e(),t(28,"td"),i(29),e()(),t(30,"tr")(31,"th"),i(32,"Estado:"),e(),t(33,"td",34),s(34,"nb-badge",39),e()(),t(35,"tr",40)(36,"th"),i(37,"Acciones:"),e(),t(38,"td")(39,"button",41),u("click",function(){let l=C(n).$implicit,r=_();return x(r.showEvent(l))}),i(40," Ver consulta "),s(41,"nb-icon",37),e()()()}if(o&2){let n=a.$implicit;d(4),c(n.fecha),d(5),c(n.hora),d(5),c(n.paciente),d(5),c(n.medico),d(5),c(n.especialidad),d(5),c(n.edificio),d(5),f("text",n.estado)("status",n.estado_abreviatura==="PN"?"basic":n.estado_abreviatura==="CC"?"primary":n.estado_abreviatura==="DEL"?"danger":n.estado_abreviatura==="FIN"?"success":"")}}var ct=(()=>{let a=class a{get f(){return this.form.controls}constructor(){this._dialogService=p(oe),this._consultationService=p(B),this._appointmentService=p(Qe),this._fb=p(ee),this._destroyRef=p(I),this._datePipe=p(we),this.tableHeadings=P(["Fecha","Hora","Paciente","M\xE9dico","Especialidad","Edificio","Estado","Acciones"]),this.statuses=G(this._appointmentService.getStatuses()),this.consultations=P([]),this.form=this._fb.group({fecha_desde:["",[y.required]],fecha_hasta:["",[y.required]],paciente:[""],estadoid:[""]}),this.f.fecha_desde.setValue(new Date(new Date().getFullYear(),new Date().getMonth(),1)),this.f.fecha_hasta.setValue(new Date),this.subscribeForms(),this.getConsultations()}subscribeForms(){this.f.fecha_desde.valueChanges.pipe(T(this._destroyRef)).subscribe(m=>{this.f.fecha_hasta.value<m&&this.f.fecha_hasta.setValue(m)}),this.f.fecha_hasta.valueChanges.pipe(T(this._destroyRef)).subscribe(m=>{this.f.fecha_desde.value>m&&this.f.fecha_desde.setValue(m)})}getConsultations(){let m=ce(L({},this.form.value),{fecha_desde:this._datePipe.transform(this.form.value.fecha_desde,"yyyy-MM-dd"),fecha_hasta:this._datePipe.transform(this.form.value.fecha_hasta,"yyyy-MM-dd")});this._consultationService.getConsultations(m).pipe(T(this._destroyRef)).subscribe(l=>this.consultations.set(l))}showEvent(m){let l=this._dialogService.open(tt,{context:{detail:m,id:m.citaid,origin:et.CONSULTATION}})}};a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=S({type:a,selectors:[["ng-component"]],standalone:!0,features:[v],decls:59,vars:4,consts:[["dateFromInput",""],["dateFromPicker",""],["dateToInput",""],["dateToPicker",""],[1,"border-0"],[1,"border-0","px-2","px-md-4"],[1,"fs-4"],[1,"px-2","px-md-4"],[1,"row","g-3","mb-4",3,"formGroup"],[1,"col-md-6","col-xxl-2"],[1,"label","fs-7","mb-1"],[1,"d-flex","position-relative"],["nbInput","","placeholder","Fecha inicio","formControlName","fecha_desde","fullWidth","",3,"nbDatepicker"],["nbButton","","ghost","",1,"position-absolute","end-0",3,"click"],["icon","calendar-outline"],["nbInput","","placeholder","Fecha fin","formControlName","fecha_hasta","fullWidth","",3,"nbDatepicker"],[1,"col-md-6","col-lg-5","col-xxl-3"],["nbPrefix","","icon","search-outline"],["nbInput","","type","search","placeholder","Buscar paciente por nombre o dni","formControlName","paciente","fullWidth",""],[1,"col-md-6","col-lg-4","col-xxl-3"],["placeholder","Seleccione un estado","formControlName","estadoid","fullWidth",""],["value",""],[3,"value"],[1,"col-md-12","col-lg-3","col-xxl-2","mt-lg-auto"],["nbButton","","status","primary","fullWidth","",3,"click"],["icon","options-2-outline"],[1,"table-responsive","d-none","d-lg-block","d-xl-none","d-xxl-block"],[1,"table","table-borderless"],[1,"border-bottom","border-top"],[1,"text-center"],[1,"align-middle","text-center"],[1,"text-center","align-middle"],[1,"table-responsive","d-block","d-lg-none","d-xl-block","d-xxl-none"],[1,"table","table-sm","table-bordered"],[1,"position-relative"],["position","top left",1,"center-badge",3,"text","status"],["nbButton","","nbTooltip","Ver consulta","size","small",3,"click"],["icon","eye-outline"],["colspan","8"],["position","center left",1,"ms-1",3,"text","status"],[1,"align-middle","last-row"],["nbButton","","size","tiny",3,"click"]],template:function(l,r){if(l&1){let g=E();t(0,"nb-card",4)(1,"nb-card-header",5)(2,"span",6),i(3,"Consultas m\xE9dicas"),e()(),t(4,"nb-card-body",7)(5,"form",8)(6,"div",9)(7,"label",10),i(8,"Desde: "),e(),t(9,"div",11),s(10,"input",12,0),t(12,"button",13),u("click",function(){C(g);let ge=se(11);return x(ge.click())}),s(13,"nb-icon",14),e(),s(14,"nb-datepicker",null,1),e()(),t(16,"div",9)(17,"label",10),i(18,"Hasta: "),e(),t(19,"div",11),s(20,"input",15,2),t(22,"button",13),u("click",function(){C(g);let ge=se(21);return x(ge.click())}),s(23,"nb-icon",14),e(),s(24,"nb-datepicker",null,3),e()(),t(26,"div",16)(27,"label",10),i(28,"Paciente: "),e(),t(29,"nb-form-field"),s(30,"nb-icon",17)(31,"input",18),e()(),t(32,"div",19)(33,"label",10),i(34,"Estado: "),e(),t(35,"nb-select",20)(36,"nb-option",21),i(37,"Todos"),e(),b(38,Ut,2,2,"nb-option",22,qt),e()(),t(40,"div",23)(41,"button",24),u("click",function(){return C(g),x(r.getConsultations())}),i(42," Filtrar "),s(43,"nb-icon",25),e()()(),t(44,"div",26)(45,"table",27)(46,"thead",28)(47,"tr",29),b(48,Lt,3,3,"th",null,$),e()(),t(50,"tbody"),b(51,Wt,18,8,"tr",30,st,!1,jt,3,0,"tr",31),e()()(),t(54,"div",32)(55,"table",33)(56,"tbody"),b(57,Ht,42,8,null,null,st),e()()()()()}if(l&2){let g=se(15),k=se(25);d(5),f("formGroup",r.form),d(5),f("nbDatepicker",g),d(10),f("nbDatepicker",k),d(18),h(r.statuses()),d(10),h(r.tableHeadings()),d(3),h(r.consultations()),d(6),h(r.consultations())}},dependencies:[Oe,te,Z,J,X,Y,K,Q,$e,Pe,V,R,M,D,N,w,Ze,Be,Ae,Ye,Xe,Je,F,O,ne,ie,ae,he,be,Ue,He,je],encapsulation:2});let o=a;return o})();var Cn=[{path:"",component:it,children:[{path:"",component:ct},{path:"detail/:consultaid",component:mt,data:{breadcrumb:o=>`Cita n\xB0 ${Ke(o)}`}}]}];export{Cn as MEDICAL_CONSULTATIONS_ROUTES};
